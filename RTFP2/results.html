<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>SIP Results</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-light: #e1c2a8;
      --bg-dark: #03040c;
      --card-light: #ffffff;
      --card-dark: #1e1e1e;
      --text-light: #1e1e2e;
      --text-dark: #fefcbf;
      --primary: #06153e;
      --accent: #FBD15C;
    }

    body {
  font-family: 'Inter', sans-serif;
  margin: 0;
  padding: 10px 16px; /* Reduced padding */
  background-color: var(--bg-light);
  color: var(--text-light);
  transition: background-color 0.3s, color 0.3s;
}

    body.dark {
      background-color: var(--bg-dark);
      color: var(--text-dark);
    }

    .card {
  background-color: var(--card-light);
  color: var(--text-light);
  max-width: 600px;
  margin: 20px auto;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
  text-align: center;
}

    body.dark .card {
      background-color: var(--card-dark);
      color: var(--text-dark);
    }

    #darkModeToggle {
      background-color: var(--accent);
      color: black;
      font-weight: bold;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      position: fixed;
      top: 20px;
      right: 20px;
    }

    canvas {
  margin-top: 20px;
  max-width: 280px;
  height: 220px;
}

    .disclaimer {
      margin-top: 40px;
      background-color: #fff3cd;
      color: #856404;
      padding: 16px 20px;
      border-radius: 8px;
      border: 1px solid #ffeeba;
      font-size: 15px;
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
      text-align: center;
    }
  </style>
</head>
<body>
  <button id="darkModeToggle">Toggle Dark Mode</button>

  <div class="card">
    <h2>SIP Calculation Results</h2>
    <p><strong>SIP Type:</strong> <span id="sipType"></span></p>
    <p><strong>Total Investment:</strong> â‚¹<span id="totalInvestment"></span></p>
    <p><strong>Expected Returns:</strong> â‚¹<span id="returns"></span></p>
    <p><strong>Total Value:</strong> â‚¹<span id="totalValue"></span></p>

   <canvas id="sipChart" style="display: block; margin: 20px auto; max-width: 280px; height: 220px;"></canvas>


    <button onclick="redirectToCompare()" style="margin-top: 20px; padding: 10px 18px; font-size: 15px; background-color: rgb(118, 13, 13); color: white; border: none; border-radius: 6px; cursor: pointer;">
  ðŸ“Š Compare All SIP Types
</button>

  <div class="disclaimer">
    <strong>Disclaimer:</strong> This SIP calculator is meant for educational and illustrative purposes only.
    Projections are based on assumed returns and do not guarantee future performance.
    Mutual fund investments are subject to market risks.
    Please consult a certified financial advisor before making investment decisions.
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    const data = JSON.parse(localStorage.getItem("sipData"));

    const sipType = data?.sipType;
    const monthlyAmount = parseFloat(data?.monthlyAmount || 0);
    const years = parseFloat(data?.years || 0);
    const category = data?.category;
    const stepUpPercent = parseFloat(data?.stepUpPercent || 0);
    const flexibleMonths = parseInt(data?.flexibleMonths || 0);
    const flexibleValues = data?.flexibleValues?.map(v => parseFloat(v) || 0) || [];

    document.getElementById("sipType").textContent = sipType;

    let totalInvestment = 0, futureValue = 0;
    let monthlyRate = 0.01;

    if (sipType === "Flexible SIP") {
      const totalMonths = flexibleValues.length;
      flexibleValues.forEach((amt, idx) => {
        const monthsLeft = totalMonths - idx;
        futureValue += amt * Math.pow(1 + monthlyRate, monthsLeft);
        totalInvestment += amt;
      });
    } else {
      const totalMonths = years * 12;

      if (sipType === "Step-up SIP") {
        monthlyRate = 0.15 / 12;
        let currentAmount = monthlyAmount;
        for (let i = 0; i < totalMonths; i++) {
          const monthsLeft = totalMonths - i;
          futureValue += currentAmount * Math.pow(1 + monthlyRate, monthsLeft);
          totalInvestment += currentAmount;
          if ((i + 1) % 12 === 0) {
            currentAmount *= (1 + stepUpPercent / 100);
          }
        }
      } else {
        switch (category) {
          case "Small Cap": monthlyRate = 0.15 / 12; break;
          case "Mid Cap": monthlyRate = 0.12 / 12; break;
          case "Large Cap": monthlyRate = 0.10 / 12; break;
        }

        futureValue = monthlyAmount * ((Math.pow(1 + monthlyRate, totalMonths) - 1) / monthlyRate) * (1 + monthlyRate);
        totalInvestment = monthlyAmount * totalMonths;
      }
    }

    const returns = futureValue - totalInvestment;

    document.getElementById("totalInvestment").textContent = Math.round(totalInvestment).toLocaleString("en-IN");
    document.getElementById("returns").textContent = Math.round(returns).toLocaleString("en-IN");
    document.getElementById("totalValue").textContent = Math.round(futureValue).toLocaleString("en-IN");

    const ctx = document.getElementById("sipChart").getContext("2d");
    new Chart(ctx, {
      type: "pie",
      data: {
        labels: ["Total Investment", "Expected Returns"],
        datasets: [{
          data: [Math.round(totalInvestment), Math.round(returns)],
          backgroundColor: ["#042D9D", "#FBD15C"]
        }]
      }
    });

    document.getElementById("darkModeToggle").addEventListener("click", () => {
      document.body.classList.toggle("dark");
    });

    function redirectToCompare() {
      window.location.href = "compare.html";
    }
  </script>
</body>
</html>
